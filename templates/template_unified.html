<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ config.logo_text if config else 'Integratd Living' }} - Complete Platform</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: {{ config.background_color if config else '#f5f5f7' }};
            color: #1d1d1f;
        }

        /* WELCOME SCREEN */
        .welcome-container {
            max-width: 1200px;
            margin: 60px auto;
            padding: 0 40px;
        }

        .welcome-header {
            text-align: center;
            margin-bottom: 60px;
        }

        .welcome-title {
            font-size: 48px;
            font-weight: 700;
            margin-bottom: 16px;
        }

        .welcome-subtitle {
            font-size: 20px;
            color: #666;
        }

        .modules-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 24px;
            margin-top: 40px;
        }

        .module-card {
            background: white;
            border-radius: 16px;
            padding: 32px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            transition: all 0.2s;
            cursor: pointer;
            text-decoration: none;
            color: inherit;
            display: block;
        }

        .module-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 24px rgba(85, 107, 47, 0.15);
        }

        .module-icon {
            font-size: 48px;
            margin-bottom: 16px;
        }

        .module-title {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .module-description {
            font-size: 15px;
            color: #666;
            line-height: 1.5;
        }
    </style>
</head>
<body>

    <!-- WELCOME CONTENT -->
    <div class="welcome-container">
        <div class="welcome-header">
            <h1 class="welcome-title">{{ config.welcome_title if config else 'Welcome to Integratd Living' }}</h1>
            <p class="welcome-subtitle">{{ config.welcome_subtitle if config else 'Your complete business automation platform' }}</p>
        </div>

        <div class="modules-grid">
            {% if config and config.modules %}
                {% for module in config.modules %}
                <a href="{{ module.href }}" class="module-card">
                    <div class="module-icon">{{ module.icon }}</div>
                    <h2 class="module-title">{{ module.title }}</h2>
                    <p class="module-description">{{ module.description }}</p>
                </a>
                {% endfor %}
            {% else %}
            {% if 'crm' in user_permissions or 'admin' in user_permissions %}
            <a href="/crm" class="module-card">
                <div class="module-icon">ðŸ“Š</div>
                <h2 class="module-title">CRM Dashboard</h2>
                <p class="module-description">Manage customers, projects, scheduling, inventory, and more in one place.</p>
            </a>
            {% endif %}

            {% if 'quotes' in user_permissions or 'admin' in user_permissions %}
            <a href="/quotes" class="module-card">
                <div class="module-icon">ðŸ’°</div>
                <h2 class="module-title">Quote Automation</h2>
                <p class="module-description">Upload floor plans and let AI generate accurate quotes automatically.</p>
            </a>
            {% endif %}

            {% if 'canvas' in user_permissions or 'admin' in user_permissions %}
            <a href="/canvas" class="module-card">
                <div class="module-icon">ðŸŽ¨</div>
                <h2 class="module-title">Canvas Editor</h2>
                <p class="module-description">Professional floor plan editor with zoom, pan, and symbol management.</p>
            </a>
            {% endif %}

            {% if 'mapping' in user_permissions or 'admin' in user_permissions %}
            <a href="/mapping" class="module-card">
                <div class="module-icon">âš¡</div>
                <h2 class="module-title">Electrical Mapping</h2>
                <p class="module-description">Professional electrical mapping with wiring, circuits, and component management.</p>
            </a>
            {% endif %}

            {% if 'board_builder' in user_permissions or 'admin' in user_permissions %}
            <a href="/board-builder" class="module-card">
                <div class="module-icon">ðŸ”Œ</div>
                <h2 class="module-title">Loxone Board Builder</h2>
                <p class="module-description">Design professional Loxone boards with AI generation and integration with mapping data.</p>
            </a>
            {% endif %}

            {% if 'electrical_cad' in user_permissions or 'admin' in user_permissions %}
            <a href="/electrical-cad" class="module-card">
                <div class="module-icon">ðŸ“Ÿ</div>
                <h2 class="module-title">Electrical CAD Designer</h2>
                <p class="module-description">Professional-grade CAD drawings with AI generation, DXF export, and full electrical standards compliance.</p>
            </a>
            {% endif %}

            {% if 'learning' in user_permissions or 'admin' in user_permissions %}
            <a href="/learning" class="module-card">
                <div class="module-icon">ðŸ§ </div>
                <h2 class="module-title">AI Learning</h2>
                <p class="module-description">Train the system with examples to improve accuracy over time.</p>
            </a>
            {% endif %}

            {% if 'kanban' in user_permissions or 'admin' in user_permissions %}
            <a href="/kanban" class="module-card">
                <div class="module-icon">ðŸ“‹</div>
                <h2 class="module-title">Operations Board</h2>
                <p class="module-description">Kanban task management system for team workflow and project tracking.</p>
            </a>
            {% endif %}

            {% if 'admin' in user_permissions %}
            <a href="/admin" class="module-card">
                <div class="module-icon">ðŸ‘¤</div>
                <h2 class="module-title">Admin Panel</h2>
                <p class="module-description">Manage users, assign permissions, and configure system access controls.</p>
            </a>
            {% endif %}

            {% if 'simpro' in user_permissions or 'admin' in user_permissions %}
            <a href="/simpro" class="module-card">
                <div class="module-icon">ðŸ”—</div>
                <h2 class="module-title">Simpro Integration</h2>
                <p class="module-description">Connect and sync with Simpro for seamless workflow integration.</p>
            </a>
            {% endif %}

            {% if 'ai_mapping' in user_permissions or 'admin' in user_permissions %}
            <a href="/ai-mapping" class="module-card">
                <div class="module-icon">ðŸ¤–</div>
                <h2 class="module-title">AI Mapping</h2>
                <p class="module-description">Advanced AI-powered mapping and analysis tools.</p>
            </a>
            {% endif %}
            {% endif %}
        </div>
    </div>

    <!-- Footer -->
    <footer style="text-align: center; padding: 20px; color: #6b7280; font-size: 12px; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;">
        Â© 2025 Integratd Living. All rights reserved.
    </footer>


    <!-- AI Assistant Chatbot -->
    {% include 'chatbot_component.html' %}

</body>
</html>
